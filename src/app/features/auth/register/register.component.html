<div class="min-h-screen flex items-center justify-center px-4 py-12" *transloco="let t">
  <div class="w-full max-w-lg">

    <!-- Header -->
    <div class="text-center mb-8">
      <div class="w-20 h-20 bg-chocolate rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl">
        <img src="assets/img/logo.png" alt="Logo">
      </div>
      <h1 class="text-3xl font-black text-chocolate dark:text-crema">{{ t('AUTH.REG_TITLE') }}</h1>
      <p class="text-gray-500 dark:text-gray-300 mt-1">{{ t('AUTH.REG_SUBTITLE') }}</p>
    </div>

    <!-- Card -->
    <div class="bg-white dark:bg-dark-input rounded-3xl shadow-lg p-8 border dark:border-dark-hover">

      @if (errorMsg) {
        <div class="mb-4 bg-red-50 border border-red-200 text-red-700 rounded-xl px-4 py-3 text-sm">
          <fa-icon [icon]="faCircleExclamation" class="mr-1"></fa-icon> {{ errorMsg }}
        </div>
      }

      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="label-field">{{ t('AUTH.NAME') }} *</label>
            <input type="text" formControlName="nombre" class="input-field" [placeholder]="t('AUTH.PLACEHOLDER_NAME')">
            @if (form.get('nombre')?.invalid && form.get('nombre')?.touched) {
              <p class="text-red-500 text-xs mt-1">{{ t('AUTH.REQUIRED') }}</p>
            }
          </div>
          <div>
            <label class="label-field">{{ t('AUTH.LAST_NAME') }}</label>
            <input type="text" formControlName="apellidos" class="input-field" [placeholder]="t('AUTH.PLACEHOLDER_LAST_NAME')">
          </div>
        </div>

        <div>
          <label class="label-field">{{ t('AUTH.EMAIL') }} *</label>
          <input type="email" formControlName="email" class="input-field" [placeholder]="t('AUTH.PLACEHOLDER_EMAIL')">
          @if (form.get('email')?.invalid && form.get('email')?.touched) {
            <p class="text-red-500 text-xs mt-1">{{ t('AUTH.REQ_EMAIL') }}</p>
          }
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="label-field">{{ t('AUTH.PHONE') }}</label>
            <input type="tel" formControlName="telefono" class="input-field" [placeholder]="t('AUTH.PLACEHOLDER_PHONE')">
          </div>
          <div>
            <label class="label-field">{{ t('AUTH.ADDRESS') }}</label>
            <input type="text" formControlName="direccion" class="input-field" [placeholder]="t('AUTH.PLACEHOLDER_ADDRESS')">
          </div>
        </div>

        <div>
          <label class="label-field">{{ t('AUTH.USERNAME') }} *</label>
          <input type="text" formControlName="username" class="input-field" [placeholder]="t('AUTH.PLACEHOLDER_USER_REG')" autocomplete="username">
          @if (form.get('username')?.invalid && form.get('username')?.touched) {
            <p class="text-red-500 text-xs mt-1">{{ t('AUTH.REQUIRED') }}</p>
          }
        </div>

        <div>
          <label class="label-field">{{ t('AUTH.PASSWORD') }} *</label>
          <div class="relative">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password"
              class="input-field pr-10" [placeholder]="t('AUTH.PLACEHOLDER_PASS_REG')" autocomplete="new-password">
            <button type="button" (click)="showPassword = !showPassword"
              class="absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-chocolate transition-colors"
              [attr.aria-label]="showPassword ? t('AUTH.HIDE_PASS') : t('AUTH.SHOW_PASS')">
              @if (showPassword) {
                <fa-icon [icon]="faEyeSlash"></fa-icon>
              } @else {
                <fa-icon [icon]="faEye"></fa-icon>
              }
            </button>
          </div>
          @if (form.get('password')?.invalid && form.get('password')?.touched) {
            <p class="text-red-500 text-xs mt-1">{{ t('AUTH.REQ_PASS_MIN') }}</p>
          }
        </div>

        <button type="submit" [disabled]="loading || form.invalid"
          class="btn-chocolate w-full text-center mt-2 disabled:opacity-60 disabled:cursor-not-allowed">
          @if (loading) { <span>{{ t('AUTH.CREATING_ACCOUNT') }}</span> } @else { <span>{{ t('AUTH.CREATE_ACCOUNT') }}</span> }
        </button>
      </form>

      <p class="text-center text-sm text-gray-500 dark:text-gray-400 mt-6">
        {{ t('AUTH.HAVE_ACCOUNT') }}
        <a routerLink="/login" class="text-churro font-bold hover:underline">{{ t('AUTH.LOGIN_HERE') }}</a>
      </p>
    </div>
  </div>
</div>
