<div class="max-w-4xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-black text-chocolate dark:text-crema mb-6">Mis Pedidos</h1>

  @if (loading()) {
    <div class="flex justify-center py-16">
      <div class="w-10 h-10 border-4 border-churro border-t-transparent rounded-full animate-spin"></div>
    </div>
  }

  @if (!loading() && pedidos().length === 0) {
    <div class="text-center py-20">
      <fa-icon [icon]="faBoxOpen" class="text-5xl mb-4"></fa-icon>
      <p class="text-gray-500 dark:text-gray-300 text-xl font-medium mb-4">Aún no tienes pedidos</p>
      <a routerLink="/menu" class="btn-chocolate inline-block">Ir al Menú</a>
    </div>
  }

  @if (!loading() && pedidos().length > 0) {
    <div class="space-y-4">
      @for (pedido of pedidos(); track pedido.id) {
        <div class="card p-5 flex flex-col sm:flex-row sm:items-center gap-4">

          <!-- Info pedido -->
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <span class="font-black text-chocolate dark:text-crema">{{ pedido.numero_pedido }}</span>
              <span [class]="getBadgeClass(pedido.estado)" class="capitalize">{{ pedido.estado }}</span>
            </div>
            <p class="text-sm text-gray-500 dark:text-gray-400">
              {{ pedido.fecha_creacion ? (pedido.fecha_creacion | date:'dd/MM/yyyy HH:mm') : '' }}
            </p>
            <p class="text-sm text-gray-500 dark:text-gray-400 capitalize">{{ pedido.metodo_pago }}</p>
          </div>

          <!-- Total -->
          <div class="text-right">
            <p class="text-2xl font-black text-chocolate dark:text-crema">{{ pedido.total | currency:'EUR':'symbol':'1.2-2' }}</p>
          </div>

          <!-- Ver detalle -->
          <a [routerLink]="['/mis-pedidos', pedido.id]"
            class="btn-outline btn-sm whitespace-nowrap">
            Ver detalle →
          </a>
        </div>
      }
    </div>
  }
</div>
